{"version":3,"file":"index.bundle.js","mappings":";;;;;;;;;;AAAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB,uHAAuH;AAC5I;AACA;AACA,qBAAqB;AACrB;AACA,+BAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,8BAA8B;AACnG,uEAAuE,8BAA8B;AACrG;AACA;AACA,aAAa;AACb,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF,yBAAyB;AAC5G;AACA,aAAa;AACb,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,iFAAiF,sBAAsB;AACvG;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;AACA;AACA;AACA,+EAA+E;AAC/E;AACA;AACA;AACA,yDAAyD;AACzD;AACA,aAAa;AACb;AACA,qBAAqB;AACrB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,gCAAgC;AAChC,cAAc;AACd,+BAA+B;AAC/B;AACA;AACA;AACA;AACA,IAAI;;;;;;;;;;;AC1KS;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CA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","sources":["webpack://render/../../node_modules/serde-ts/dist/SerDe.js","webpack://render/../../node_modules/serde-ts/dist/index.js","webpack://render/../Matrix/src/FrameGroup.ts","webpack://render/../Matrix/src/Matrix.ts","webpack://render/../Matrix/src/MatrixElement.ts","webpack://render/../Matrix/src/Modifiers.ts","webpack://render/webpack/bootstrap","webpack://render/webpack/runtime/compat get default export","webpack://render/webpack/runtime/define property getters","webpack://render/webpack/runtime/hasOwnProperty shorthand","webpack://render/webpack/runtime/make namespace object","webpack://render/./src/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SerDe = void 0;\n// Function to check if a given function is a class constructor\nfunction isClass(func) {\n    return typeof func === 'function' && /^\\s*class\\s+/.test(func.toString());\n}\nclass SerDe {\n    // Method to handle simple types directly\n    static fromSimple(obj) {\n        if (obj instanceof Date || typeof obj === 'string' || typeof obj === 'number' || typeof obj === 'boolean') {\n            return obj;\n        }\n        return undefined;\n    }\n    // Method to set exclusive classes for serialization\n    static setExclusively(list) {\n        SerDe.only = new Set([...list, Array, Map, Set]);\n    }\n    // Main serialization method\n    static serialise(obj, visited = new Map(), _map = new Map(), depth = 0, parent) {\n        var _a, _b, _c, _d, _e;\n        if (typeof obj === 'undefined' || obj === null)\n            return obj;\n        // If the object is a class and is not in the exclusive list, skip serialization\n        if (((_a = SerDe.only) === null || _a === void 0 ? void 0 : _a.size) && isClass(obj === null || obj === void 0 ? void 0 : obj.constructor) && !SerDe.only.has(obj.constructor))\n            return undefined;\n        if (obj instanceof Date)\n            return { t: 'Date', v: obj.valueOf() };\n        let maybeSimple = SerDe.fromSimple(obj);\n        if (maybeSimple !== undefined)\n            return maybeSimple;\n        if (visited.has(obj)) {\n            visited.get(obj).times++;\n            return { t: (_b = obj === null || obj === void 0 ? void 0 : obj.constructor) === null || _b === void 0 ? void 0 : _b.name, v: { _mapId: SerDe.weakMap.get(obj) } };\n        }\n        if (obj instanceof Function)\n            return { t: 'function', v: obj.name };\n        if (parent)\n            visited.set(obj, { times: 1, parent });\n        let id = (_c = SerDe.weakMap.get(obj)) !== null && _c !== void 0 ? _c : SerDe.id++;\n        SerDe.weakMap.set(obj, id);\n        // Handle Map objects\n        if (obj instanceof Map) {\n            let serialised = new Array(obj.size);\n            _map.set(id, serialised);\n            let i = 0;\n            obj.forEach((value, key) => {\n                serialised[i] = [\n                    SerDe.serialise(key, visited, _map, depth + 1, { obj: serialised, key: [i, 0] }),\n                    SerDe.serialise(value, visited, _map, depth + 1, { obj: serialised, key: [i, 1] }),\n                ];\n                i++;\n            });\n            return { t: obj.constructor.name, v: serialised };\n        }\n        // Handle Set and Array objects\n        if (obj instanceof Set || obj instanceof Array) {\n            let serialised = Array(obj instanceof Set ? obj.size : obj.length);\n            _map.set(id, serialised);\n            let i = 0;\n            obj.forEach((value) => {\n                serialised[i] = SerDe.serialise(value, visited, _map, depth + 1, { obj: serialised, key: i });\n                i++;\n            });\n            return { t: obj.constructor.name, v: serialised };\n        }\n        // Handle generic objects\n        let serialised = {};\n        _map.set(id, serialised);\n        for (let [key, value] of Object.entries(obj)) {\n            serialised[key] = SerDe.serialise(value, visited, _map, depth + 1, { obj: serialised, key });\n        }\n        // If we are at the top level, handle circular references and multiple instances\n        if (depth === 0) {\n            let recursionVisited = Array.from(visited)\n                .filter(([_, val]) => val.times > 1)\n                .map(([obj, val]) => [SerDe.weakMap.get(obj), val]); // Explicitly cast id to number\n            recursionVisited.forEach(([id, val]) => {\n                if (val.parent.key instanceof Array) {\n                    ;\n                    val.parent.obj[val.parent.key[0]][val.parent.key[1]].v = { _mapId: id };\n                }\n                else {\n                    ;\n                    val.parent.obj[val.parent.key].v = { _mapId: id };\n                }\n            });\n            // Attach the _map for serialization result\n            return { t: (_d = obj === null || obj === void 0 ? void 0 : obj.constructor) === null || _d === void 0 ? void 0 : _d.name, v: serialised, _map: recursionVisited.map((x) => [x[0], _map.get(x[0])]) };\n        }\n        return { t: (_e = obj === null || obj === void 0 ? void 0 : obj.constructor) === null || _e === void 0 ? void 0 : _e.name, v: serialised };\n    }\n    // Main deserialization method\n    static deserialize(obj) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n        if (obj === undefined || obj === null)\n            return obj;\n        if ((obj === null || obj === void 0 ? void 0 : obj.t) === 'Date')\n            return new Date(obj.v);\n        // If obj is a primitive, return it directly (with Date handling)\n        if (SerDe.isPrimitive(obj)) {\n            return obj instanceof Date ? new Date(obj) : obj;\n        }\n        if (obj.t === 'function')\n            return (_a = SerDe.classRegistry.get(obj.v)) !== null && _a !== void 0 ? _a : {};\n        // Handles the restoration of _map for object references if it exists\n        if (obj._map) {\n            SerDe._map = new Map(obj._map);\n            SerDe._tempMap = new Map();\n        }\n        // Retrieve the class constructor if available\n        const classConstructor = SerDe.classRegistry.get(obj.t);\n        let instance;\n        if (((_b = obj.v) === null || _b === void 0 ? void 0 : _b._mapId) && ((_c = SerDe._tempMap) === null || _c === void 0 ? void 0 : _c.has(obj.v._mapId))) {\n            return (_d = SerDe._tempMap) === null || _d === void 0 ? void 0 : _d.get(obj.v._mapId);\n        }\n        else {\n            instance = classConstructor ? Object.create(classConstructor.prototype) : {};\n            (_e = SerDe._tempMap) === null || _e === void 0 ? void 0 : _e.set(obj.v._mapId, instance);\n        }\n        let nested = (_h = (_f = SerDe._map) === null || _f === void 0 ? void 0 : _f.get((_g = obj.v) === null || _g === void 0 ? void 0 : _g._mapId)) !== null && _h !== void 0 ? _h : obj.v;\n        // Deserialize based on the type of object\n        switch (obj.t) {\n            case 'Array': // Handle arrays\n                instance = nested.map((item) => SerDe.deserialize(item));\n                (_j = SerDe._tempMap) === null || _j === void 0 ? void 0 : _j.set(obj.v._mapId, instance);\n                return instance;\n            case 'Map': // Handle maps\n                instance = new Map(nested.map(([key, value]) => [SerDe.deserialize(key), SerDe.deserialize(value)]));\n                (_k = SerDe._tempMap) === null || _k === void 0 ? void 0 : _k.set(obj.v._mapId, instance);\n                return instance;\n            case 'Set': // Handle sets\n                instance = new Set(nested.map((item) => SerDe.deserialize(item)));\n                (_l = SerDe._tempMap) === null || _l === void 0 ? void 0 : _l.set(obj.v._mapId, instance);\n                return instance;\n            default: // Handle objects\n                for (const [key, value] of Object.entries(nested)) {\n                    instance[key] = SerDe.deserialize(value);\n                }\n                if (classConstructor && SerDe.initFuncName && typeof instance[SerDe.initFuncName] === 'function') {\n                    instance[SerDe.initFuncName]();\n                }\n        }\n        // Clear the _map after deserialization is complete to free memory\n        if (obj._map) {\n            SerDe._map = undefined;\n            SerDe._tempMap = undefined;\n        }\n        return instance; // Return the deserialized instance\n    }\n    // Method to register classes for deserialization\n    static classRegistration(classes) {\n        classes.forEach((x) => SerDe.classRegistry.set(x.name, x));\n    }\n    // Helper method to check if a value is primitive\n    static isPrimitive(value) {\n        return (value === null ||\n            ['number', 'string', 'boolean', 'undefined', 'symbol', 'bigint'].includes(typeof value) ||\n            value instanceof Date);\n    }\n}\nexports.SerDe = SerDe;\nSerDe.initFuncName = '_initFn'; // Name of the initialization function (if exists)\nSerDe.id = 0; // Unique ID counter for objects\nSerDe.weakMap = new WeakMap(); // WeakMap to track objects during serialization\nSerDe.classRegistry = new Map([\n    ['Array', Array],\n    ['Set', Set],\n    ['Map', Map],\n]); // Registry of classes for deserialization\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// src/index.ts\n__exportStar(require(\"./SerDe\"), exports);\n","export class FrameGroup {\n    startTime: number;\n    frameInterval: number;\n    frameCount: number;\n    framesPerSecond: number;\n    framePositions: number[];\n    totalHeight: number;\n    width: number;\n\n    constructor(startTime: number, frameInterval: number, frameCount: number, framesPerSecond: number, framePositions: number[], totalHeight: number, width: number) {\n        this.startTime = startTime;\n        this.frameInterval = frameInterval;\n        this.frameCount = frameCount;\n        this.framesPerSecond = framesPerSecond;\n        this.framePositions = framePositions;\n        this.totalHeight = totalHeight;\n        this.width = width;\n    }\n}\n","import {MatrixElement} from \"./MatrixElement\";\nimport {FrameGroup} from \"./FrameGroup\";\n\nexport class Matrix {\n    width: number;\n    height: number;\n    framesPerSecond: number;\n    framesPerGroup: number;\n    startTime: number;\n    lastEndTime: number;\n    private elementIdCounter: number = 0;\n    public elements: MatrixElement[] = [];\n\n\n    constructor(width: number, height: number, framesPerSecond: number, framesPerGroup: number, startTime: number) {\n        this.width = width;\n        this.height = height;\n        this.framesPerSecond = framesPerSecond;\n        this.framesPerGroup = framesPerGroup;\n        this.startTime = startTime;\n        this.lastEndTime = startTime;\n    }\n\n    generateElementId(): string {\n        return `element-${this.elementIdCounter++}`;\n    }\n\n    setStartTime(newStartTime: number) {\n        this.startTime = newStartTime;\n        console.log(this.startTime)\n        this.lastEndTime = newStartTime;\n    }\n\n    generateNextGroup(container: HTMLElement, matrixElements: MatrixElement[]): FrameGroup {\n        const existingFrames = Array.from(container.children) as HTMLElement[];\n        const frameInterval = 1000 / this.framesPerSecond;\n        const frameCount = this.framesPerGroup;\n\n        // Начало новой группы\n        const startTime = this.lastEndTime;\n        const framePositions = Array.from({length: frameCount}, (_, i) => startTime + i * frameInterval);\n        this.lastEndTime = startTime + frameInterval * frameCount;\n\n        for (let i = 0; i < frameCount; i++) {\n            let frame: HTMLElement;\n\n            if (i < existingFrames.length) {\n                // Используем существующий элемент\n                frame = existingFrames[i];\n            } else {\n                // Создаем новый элемент, если его еще нет\n                frame = document.createElement('div');\n                frame.style.position = 'absolute';\n                frame.style.width = `${this.width}px`;\n                frame.style.height = `${this.height}px`;\n                frame.style.overflow = 'hidden';\n                container.appendChild(frame);\n            }\n\n            frame.style.top = `${i * this.height}px`;\n\n            // Очищаем содержимое фрейма перед добавлением новых элементов\n            frame.innerHTML = '';\n\n            matrixElements.sort((a, b) => b.layer - a.layer)\n            // Применяем модификаторы и рендерим каждый элемент матрицы\n            for (const matrixElement of matrixElements) {\n                matrixElement.applyModifiers(framePositions[i]);\n                matrixElement.renderTo(frame);\n            }\n        }\n\n        // Удаляем лишние элементы, если они есть\n        if (existingFrames.length > frameCount) {\n            for (let j = existingFrames.length - 1; j >= frameCount; j--) {\n                container.removeChild(existingFrames[j]);\n            }\n        }\n\n        const totalHeight = this.height * frameCount;\n        return new FrameGroup(startTime, frameInterval, frameCount, this.framesPerSecond, framePositions, totalHeight, this.width);\n    }\n\n    addElement(matrixElement: MatrixElement) {\n        if (!this.elements.includes(matrixElement)) {\n            this.elements.push(matrixElement);\n        }\n\n    }\n\n    removeElement(matrixElement: MatrixElement) {\n        this.elements = this.elements.filter(x => x !== matrixElement)\n    }\n\n    clearElements() {\n        this.elements = []\n    }\n}\n","import { DynamicModifier } from \"./Modifiers\";\nimport { Matrix } from \"./Matrix\";\n\nexport class MatrixElement {\n    id: string;\n    content: string | HTMLImageElement | SVGElement;\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    modifiers: DynamicModifier[];\n    textWidth: number;\n    visible: boolean = true;\n    layer = 0;\n    textUpdateCallback?: (timestamp: number) => string;\n    textStyle: Partial<CSSStyleDeclaration>;\n    additionalStyles: Partial<CSSStyleDeclaration>;  // Новое поле для дополнительных стилей\n\n    constructor(matrix: Matrix, content: string | HTMLImageElement | SVGElement, x: number, y: number, width: number, height: number) {\n        this.id = matrix.generateElementId();\n        this.content = content;\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.modifiers = [];\n        this.textStyle = {};\n        this.additionalStyles = {};  // Инициализация нового поля\n\n        this.textWidth = this.calculateTextWidth();\n    }\n\n    // Метод для вычисления ширины текста без добавления элемента в DOM\n    calculateTextWidth(): number {\n        const tempDiv = document.createElement('div');\n        tempDiv.style.position = 'absolute';\n        tempDiv.style.visibility = 'hidden';\n        tempDiv.style.whiteSpace = 'nowrap';\n        tempDiv.style.font = this.textStyle.font || '16px Arial';\n        tempDiv.innerText = this.content as string;\n        document.body.appendChild(tempDiv);\n        const width = tempDiv.clientWidth;\n        document.body.removeChild(tempDiv);\n        return width;\n    }\n\n    setText(newText: string) {\n        this.content = newText;\n        // this.textWidth = this.calculateTextWidth();\n    }\n\n    updateTextStyle(newStyles: Partial<CSSStyleDeclaration>) {\n        Object.assign(this.textStyle, newStyles);\n        this.textWidth = this.calculateTextWidth();\n    }\n\n    updateAdditionalStyles(newStyles: Partial<CSSStyleDeclaration>) {  // Новый метод для обновления дополнительных стилей\n        Object.assign(this.additionalStyles, newStyles);\n    }\n\n    setTextUpdateCallback(callback: (timestamp: number) => string) {\n        this.textUpdateCallback = callback;\n    }\n\n    applyModifiers(timestamp: number) {\n        if (this.textUpdateCallback) {\n            const newText = this.textUpdateCallback(timestamp);\n            this.setText(newText);\n        }\n        for (const modifier of this.modifiers) {\n            modifier.apply(timestamp);\n        }\n    }\n\n    addModifier(modifier: DynamicModifier) {\n        this.modifiers.push(modifier);\n    }\n\n    renderTo(container: HTMLElement) {\n        this.calculateTextWidth()\n        if (!this.visible) return;\n        // Ищем существующий элемент в контейнере по id\n        let div = container.querySelector(`#${this.id}`) as HTMLElement;\n\n        if (!div) {\n            // Если элемент не найден, создаем новый\n            div = document.createElement('div');\n            div.id = this.id;\n            container.appendChild(div);\n        }\n\n        // Обновляем свойства элемента\n        div.style.position = 'absolute';\n        div.style.left = `${Math.floor(this.x + 0.0001)}px`;\n        div.style.top = `${Math.floor(this.y + 0.0001)}px`;\n        div.style.width = `${this.width}px`;\n        div.style.height = `${this.height}px`;\n        div.style.overflow = 'hidden';\n\n        // Применяем основные стили и дополнительные стили\n        Object.assign(div.style, this.textStyle, this.additionalStyles);\n\n        if (typeof this.content === 'string') {\n            div.innerText = this.content;\n        } else if (this.content instanceof HTMLImageElement || this.content instanceof SVGElement) {\n            div.innerHTML = ''; // Очистка перед добавлением\n            div.appendChild(this.content);\n        }\n    }\n}\n\nexport class TimeMatrixElement extends MatrixElement {\n    constructor(matrix: Matrix, content: string | HTMLImageElement | SVGElement, x: number, y: number, width: number, height: number) {\n        super(matrix, content, x, y, width, height);\n        this._initFn();\n    }\n\n    _initFn() {\n        this.setTextUpdateCallback((timestamp) => {\n            const now = new Date(timestamp);\n            return now.toISOString().substr(11, 12); // Формат времени с миллисекундами (HH:mm:ss.sss)\n        });\n    }\n}\n","import {MatrixElement} from \"./MatrixElement\";\n\nexport abstract class DynamicModifier {\n    protected element: MatrixElement;\n    framesPerSecond: number | undefined;\n\n    constructor(element: MatrixElement, framesPerSecond?: number) {\n        this.element = element;\n        this.framesPerSecond = framesPerSecond\n        element.addModifier(this)\n    }\n\n    abstract apply(timestamp: number): void;\n}\n\nexport class RotationModifier extends DynamicModifier {\n    angle: number;\n\n    constructor(element: MatrixElement, angle: number) {\n        super(element);\n        this.angle = angle;\n    }\n\n    apply(timestamp: number) {\n        // Здесь можно применить вращение для расчетов, если это имеет смысл\n        const rotation = this.angle * (timestamp / 1000);\n        // Например, мы можем сохранить угол вращения или другую информацию в элементе\n        // Но это будет чисто для логики, не для прямого рендеринга в DOM\n    }\n}\n\nexport class RainbowEffectModifier extends DynamicModifier {\n    period: number;\n\n    constructor(element: MatrixElement, period: number) {\n        super(element);\n        this.period = period;\n    }\n\n    apply(timestamp: number) {\n        const phase = (timestamp % this.period) / this.period;\n        const hue = Math.floor(phase * 360);\n        this.element.updateTextStyle({color: `hsl(${hue}, 100%, 50%)`});\n    }\n}\n\n\nexport class ScrollingTextModifier extends DynamicModifier {\n    speedPixelsPerSecond: number;\n    previousTime: number | undefined;\n\n\n    constructor(element: MatrixElement, speedPixelsPerSecond: number, framesPerSecond: number) {\n        super(element, framesPerSecond);\n        this.speedPixelsPerSecond = speedPixelsPerSecond;\n        this.previousTime = undefined;\n    }\n\n    apply(timestamp: number) {\n        if (!this.previousTime) {\n            this.previousTime = timestamp;\n            this.element.x = this.element.width;\n            return;\n        }\n\n        this.element.x -= this.speedPixelsPerSecond * (timestamp - this.previousTime) / 1000;\n        this.previousTime = timestamp;\n\n        if (this.element.x + this.element.textWidth < 0) {\n            this.element.x = this.element.width;\n        }\n    }\n}\n\nexport class BlinkModifier extends DynamicModifier {\n    apply(timestamp: number): void {\n        let t = timestamp % 1000\n        this.element.visible = t < 500\n    }\n\n}\n\nexport class ScaleModifier extends DynamicModifier {\n    apply(timestamp: number): void {\n        // Вычисляем масштаб на основе времени\n        let t = (timestamp % 2000) / 2000;\n        if (t > 0.5) t = 1 - t\n        t = 1 + t\n\n        // Применяем масштабирование к элементу\n        this.element.updateAdditionalStyles({\n            transform: `scale(${t})`\n        });\n    }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import {Matrix} from '../../Matrix/src/Matrix';\nimport {MatrixElement, TimeMatrixElement} from '../../Matrix/src/MatrixElement';\nimport {\n    BlinkModifier,\n    RainbowEffectModifier,\n    RotationModifier,\n    ScaleModifier,\n    ScrollingTextModifier\n} from '../../Matrix/src/Modifiers';\nimport {SerDe} from \"serde-ts\";\n\n\n\n// Регистрируем классы для серилизации и десериализации\nSerDe.classRegistration([\n    Matrix,\n    MatrixElement,\n    TimeMatrixElement,\n    RainbowEffectModifier,\n    ScrollingTextModifier,\n    RotationModifier,\n    BlinkModifier,\n    ScaleModifier\n]);\n\ninterface WebSocketCommand {\n    command: 'generateNextGroup' | 'setStartTime' | 'getSnapshot' | 'loadSnapshot' | 'initializeElements';\n    value?: any;\n    imageBuffer?: string;\n}\n\nlet ws: WebSocket | null = null;\nlet matrix: Matrix | undefined;\n\nfunction getSnapshot(): string {\n    console.log('get snapshot', matrix?.lastEndTime);\n    return SerDe.serialise(matrix!);\n}\n\nfunction fromSnapshot(snapshot: string): void {\n    matrix = SerDe.deserialize(snapshot) as Matrix;\n    console.log('fromSnapshot', new Date(matrix?.lastEndTime).toString());\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    console.log('DOM fully loaded and parsed');\n\n    const container = document.getElementById('matrix-container');\n\n    if (!container) {\n        console.error('Container not found!');\n        return;\n    }\n\n    if (!ws) {\n        const urlParams = new URLSearchParams(window.location.search);\n        const wsPort = urlParams.get('wsPort') || '8081';\n        ws = new WebSocket(`ws://localhost:${wsPort}`);\n        ws.onopen = () => {\n            console.log('WebSocket connection opened:', wsPort);\n        };\n\n        ws.onmessage = (event) => {\n            try {\n                const message: WebSocketCommand = JSON.parse(event.data);\n                switch (message.command) {\n                    case 'generateNextGroup':\n                        if (matrix) {\n                            const frameGroup = matrix.generateNextGroup(container, matrix.elements);\n                            console.log(\"generation done sending frameGroup\");\n                            ws!.send(JSON.stringify({frameGroup}));\n                        }\n                        break;\n\n                    case 'setStartTime':\n                        if (matrix) {\n                            matrix.setStartTime(message.value);\n                            ws!.send(JSON.stringify({command: 'setStartTime'}));\n                        }\n                        break;\n\n                    case 'initializeElements':\n                        initializeElements();\n                        ws?.send(JSON.stringify({client: \"renderer\"}));\n                        break;\n\n                    case 'getSnapshot':\n                        const snapshot = getSnapshot();\n                        ws!.send(JSON.stringify({command: 'loadSnapshot', value: snapshot}));\n                        break;\n\n                    case 'loadSnapshot':\n                        fromSnapshot(message.value);\n                        ws?.send(JSON.stringify({client: \"renderer\"}));\n                        break;\n                }\n            } catch (e) {\n                console.error('Error processing message:', e);\n            }\n        };\n\n        ws.onclose = () => {\n            console.log('WebSocket connection closed');\n            ws = null; // Reset the WebSocket instance to allow reconnection\n        };\n\n        ws.onerror = (error) => {\n            console.error('WebSocket error:', error);\n        };\n    }\n});\n\nfunction initializeElements() {\n    matrix = new Matrix(128, 64, 60, 20, Date.now());\n\n    const textElement1 = new MatrixElement(matrix, \"Running text 1\", 0, 0, 128, 20);\n    textElement1.updateTextStyle({\n        fontSize: '12px',\n        color: 'lime',\n        fontWeight: 'bold'\n    });\n    matrix.addElement(textElement1);\n\n    const textElement2 = new MatrixElement(matrix, \"Running text 2\", 0, 30, 128, 20);\n    textElement2.updateTextStyle({\n        fontSize: '12px',\n        color: 'red',\n        fontWeight: 'bold'\n    });\n    matrix.addElement(textElement2);\n\n    const timeElement = new TimeMatrixElement(matrix, \"\", 0, 15, 128, 20);\n    timeElement.updateTextStyle({\n        fontSize: '12px',\n        color: 'yellow',\n        fontWeight: 'bold',\n        textAlign: 'center'\n    });\n    matrix.addElement(timeElement);\n\n    // new BlinkModifier(timeElement);\n    new ScaleModifier(timeElement);\n    new ScrollingTextModifier(textElement1, 20, 30);\n    new RainbowEffectModifier(textElement1, 2000);\n    new ScrollingTextModifier(textElement2, 30, 30);\n    new RainbowEffectModifier(textElement2, 2500);\n\n\n}\n\n\n"],"names":[],"sourceRoot":""}